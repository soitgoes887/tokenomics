# Score-based Portfolio Rebalancer Configuration
# This replaces the news-sentiment trading with fundamental score-based rebalancing

providers:
  broker: alpaca-paper

strategy:
  name: "score-rebalancer"
  capital_usd: 100000
  position_size_min_usd: 500
  position_size_max_usd: 5000
  max_open_positions: 100
  target_new_positions_per_month: 100

rebalancing:
  top_n_stocks: 100          # Hold top 100 stocks by fundamental score
  weighting: "score"         # "score" = score-proportional, "equal" = equal weight
  max_position_pct: 5.0      # Max 5% per stock
  max_sector_pct: 25.0       # Max 25% per sector
  min_score: 50.0            # Only include stocks with score >= 50
  rebalance_threshold_pct: 20.0  # Only trade if >20% deviation from target
  min_trade_usd: 100.0       # Skip trades smaller than $100

# Scoring profiles â€” each runs independently with its own scorer, Redis namespace,
# and Alpaca account. Selected at runtime via SCORING_PROFILE env var.
scoring_profiles:
  tokenomics_v2_base:
    scorer_class: "FundamentalsScorer"
    redis_namespace: "fundamentals:v2_base"
    alpaca_api_key_env: "ALPACA_API_KEY"
    alpaca_secret_key_env: "ALPACA_SECRET_KEY"
    description: "Original 3-factor scorer (ROE/Debt/Growth)"

  tokenomics_v3_composite:
    scorer_class: "CompositeScorer"
    redis_namespace: "fundamentals:v3_composite"
    alpaca_api_key_env: "ALPACA_API_KEY_V3"
    alpaca_secret_key_env: "ALPACA_SECRET_KEY_V3"
    description: "4-factor composite (Value/Quality/Momentum/LowVol)"
    scorer_kwargs:
      value_weight: 0.30
      quality_weight: 0.40
      momentum_weight: 0.20
      lowvol_weight: 0.10

  default_profile: "tokenomics_v2_base"

trading:
  paper: true
  market_hours_only: true
  order_type: "market"
  time_in_force: "day"

logging:
  level: "INFO"
  trade_log: "logs/trades.log"
  decision_log: "logs/decisions.log"
  app_log: "logs/tokenomics.log"
  max_bytes: 10485760
  backup_count: 5
